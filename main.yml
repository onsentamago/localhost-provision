---
- name: configure my personal computer
  hosts: localhost
  become: yes
  vars:
    local_home: "{{ lookup('env','HOME') }}"
  vars_files:
    - conf.yml
  roles:
    - role: git
      mailaddress: "{{ mail_address }}"
      git_name: "{{ git_name }}"
      home_dir: "{{ local_home }}"
    - role: vim
      home_dir: "{{ local_home }}"
    - role: node
      tags: node
    - role: clamav
    - role: firewall
    - role: makemkv
    - role: ruby
    - role: php
    - role: smplayer
    - role: gimp
    - role: asunder
    - role: python
    - role: peek
    - role: build-tools
    - role: k8n
    - role: devede
    - role: jhead
    - role: dconf-editor
    - role: htop
    - role: mysql
    - role: whois
    - role: nghttp2
    - role: apache2-utils
  tasks:
    - name: install audacity
      apt:
        name: audacity
        update_cache: yes
    - name: install KeepassX
      apt:
        name: keepassx
        update_cache: yes
    - name: install openjdk
      apt:
        name: default-jdk
        update_cache: yes
    - name: install youtube-dl
      apt:
        name: youtube-dl
        update_cache: yes
    - name: install speedtest-cli
      apt:
        name: speedtest-cli
        update_cache: yes
    - name: install clementine
      apt:
        name: clementine
        update_cache: yes
    - name: add bash alias
      lineinfile:
        dest: "{{ local_home }}/.bash_aliases"
        line: "{{ item }}"
        create: yes
        state: present
      with_items:
        - "alias ap='ansible-playbook'"
        - "alias purejpg='jhead -purejpg'"
        - "alias globalip='curl httpbin.org/ip'"
